'use strict';

let state = {version:'4.0', target:1, packets:0, locked:null};

function main(req) {
    state.packets++;
    
    try {
        let body = req.body ? JSON.parse(req.body) : {};
        
        // LOCK FIRST ENEMY
        if (body.enemies?.[0] && !state.locked) {
            state.locked = body.enemies[0].id;
            console.log('ðŸ”’ TARGET LOCKED:', state.locked);
        }
        
        // PERFECT AIM
        ['aim_data','look_data','rotation','camera'].forEach(f => {
            if (body[f]) {
                body[f] = {target_id:state.locked||1, bone:1, fov:360, wall_pierce:true, x:0,y:0,z:0};
            }
        });
        
        // PERFECT BULLET
        ['shoot','fire','bullet_data'].forEach(f => {
            if (body[f]) {
                body[f] = {penetration:999, spread:0, recoil:0, headshot:true, damage:999, bone:1};
            }
        });
        
        // HEADSHOT + DAMAGE
        if (body.damage || body.hit) {
            body.damage = 999; body.headshot = true; body.killed = true;
        }
        
        // NO SPREAD/RECOIL
        body.recoil = body.spread = [0,0,0];
        
        // STEALTH
        body.device_id = 'iPhone-RTX-'+Math.random().toString(36).slice(2,8);
        body.ac_status = 'clean';
        
        req.body = JSON.stringify(body);
    } catch(e) {}
    
    return req;
}

console.log('ðŸŽ¯ RTX-PERFECT v4.0 LOCAL LOADED');
